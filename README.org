#+TITLE: Readme

#+STARTUP: indent
#+TITLE: macOS Setup Guide

* Table of contents :toc:
  - [[#prerequisites][Prerequisites]]
- [[#install][Install]]
  - [[#general][General]]
  - [[#emacs][Emacs]]
  - [[#miscellaneous][Miscellaneous]]

** Prerequisites
*** You need to copy your ssh-keys to the new maschine and correct the file mode.

#+BEGIN_SRC shell
chmod 600 ~/.ssh/id_rsa
chmod 600 ~/.ssh/id_rsa.pub
chmod 644 ~/.ssh/known_hosts
chmod 755 ~/.ssh
#+END_SRC

*** Cloning the dotfiles

#+BEGIN_SRC shell
git clone git@github.com:Azd325/dotfiles.git ∼/
#+END_SRC

*** Installing nix

#+begin_src shell
curl -L https://nixos.org/nix/install | sh
#+end_src


*** Setup nix config

#+begin_src shell
mkdir -p ~/.config/nix
cat <<EOF > ~/.config/nix/nix.conf
experimental-features = nix-command flakes
EOF
#+end_src

* Install

** General

#+begin_src shell
cd ∼/dotfiles
nix build .#darwinConfigurations.BER.system
./result/sw/bin/darwin-rebuild --show-trace switch --flake .
#+end_src

** Emacs
*** Install doom-emacs with my configuration

#+BEGIN_SRC shell
git clone --depth 1 https://github.com/hlissner/doom-emacs ~/.emacs.d
cp --recursive ~/Projects/dotfiles/.doom.d ~/.doom.d
~/.emacs.d/bin/doom install
~/.emacs.d/bin/doom sync
#+END_SRC


** Miscellaneous
*** macOS
**** Change default screenshot folder

#+BEGIN_SRC shell
defaults write com.apple.screencapture location /Users/tim/Downloads/ && killall SystemUIServer
#+END_SRC


